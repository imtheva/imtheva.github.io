{% assign repo_item = include.repository %}

{%- comment -%}
  Accept both formats:
  1) "owner/name" (string)
  2) { name: "owner/name", description: "...", tags: [...] } (object)
{%- endcomment -%}

{% if repo_item.name %}
  {% assign full_name = repo_item.name %}
  {% assign description = repo_item.description %}
  {% assign tags = repo_item.tags %}
{% else %}
  {% assign full_name = repo_item %}
  {% assign description = null %}
  {% assign tags = null %}
{% endif %}

{% assign parts = full_name | split: '/' %}
{% assign owner = parts[0] %}
{% assign repo = parts[1] %}

<div class="repo p-2" style="flex: 1 1 320px; max-width: 520px;">
  <div class="card h-100 shadow-sm">
    <div class="card-body">
      <h5 class="card-title mb-1">
        <a href="https://github.com/{{ full_name }}" target="_blank" rel="noopener">
          {{ repo }}
        </a>
      </h5>

      <div class="text-muted small mb-2">
        <span>@{{ owner }}</span>
      </div>

      {% if description %}
        <p class="card-text mb-3">{{ description }}</p>
      {% else %}
        <p class="card-text mb-3 text-muted">Repository on GitHub.</p>
      {% endif %}

      {% if tags and tags.size > 0 %}
        <div class="mb-3">
          {% for t in tags %}
            <span class="badge rounded-pill text-bg-light border me-1 mb-1">{{ t }}</span>
          {% endfor %}
        </div>
      {% endif %}

      <a class="btn btn-sm btn-outline-primary" href="https://github.com/{{ full_name }}" target="_blank" rel="noopener"> View on GitHub </a>
    </div>
  </div>
</div>
